å¤ªå¥½äº†ï¼ä¸‹é¢æ˜¯ä¸€ä¸ªæ”¯æŒå‘½ä»¤è¡Œå‚æ•°çš„å®Œæ•´è„šæœ¬ï¼Œç”¨äºï¼š
	â€¢	æŒ‡å®š --input CSV æ–‡ä»¶è·¯å¾„
	â€¢	æŒ‡å®š --output è¾“å‡ºæ–‡ä»¶è·¯å¾„
	â€¢	æŒ‡å®š --path å¤–éƒ¨è·¯å¾„å˜é‡ï¼ˆä¼šæˆªå–å¹¶æ ¼å¼åŒ–ä¸ºæ¨¡æ¿å˜é‡ï¼‰

âœ… æ”¯æŒå‘½ä»¤è¡Œå‚æ•°çš„ Python è„šæœ¬

import csv
import argparse

def parse_project_id(path: str, prefix: str = "/home/user/") -> str:
    # å»é™¤å‰ç¼€å’Œé¦–å°¾æ–œæ ï¼Œå¹¶æ›¿æ¢ä¸­é—´çš„æ–œæ 
    if path.startswith(prefix):
        path = path[len(prefix):]
    return path.strip("/").replace("/", "_")

def main():
    parser = argparse.ArgumentParser(description="Generate text file from CSV and path info using template.")
    parser.add_argument("--input", required=True, help="Path to the input CSV file")
    parser.add_argument("--output", required=True, help="Path to the output text file")
    parser.add_argument("--path", required=True, help="External path to extract project ID")

    args = parser.parse_args()

    project_id = parse_project_id(args.path)

    template = "{project_id} - {name} is {age} years old and lives in {city}."

    with open(args.input, mode='r', encoding='utf-8') as csvfile, \
         open(args.output, mode='w', encoding='utf-8') as outfile:

        reader = csv.DictReader(csvfile)
        for row in reader:
            output_line = template.format(project_id=project_id, **row)
            outfile.write(output_line + "\n")

if __name__ == "__main__":
    main()

ğŸ§ª ä½¿ç”¨æ–¹å¼

python generate_from_csv.py \
  --input input.csv \
  --output result.txt \
  --path /home/user/data/project/version1/

âœ… è¾“å‡ºç¤ºä¾‹ï¼ˆresult.txtï¼‰

data_project_version1 - Alice is 30 years old and lives in New York.
data_project_version1 - Bob is 25 years old and lives in San Francisco.

âœ… æç¤º
	â€¢	æ¨¡æ¿ä¸­çš„å­—æ®µå¿…é¡»å’Œ CSV åˆ—ååŒ¹é…ã€‚
	â€¢	å¦‚æœä½ æƒ³è®© template ä»å¤–éƒ¨ä¼ å‚æˆ–è€…é…ç½®æ–‡ä»¶ä¸­è¯»å–ï¼Œä¹Ÿå¯ä»¥åŠ ä¸ª --template å‚æ•°ã€‚
	â€¢	è·¯å¾„å¤„ç†é€»è¾‘å¦‚æœä¸åªé™äº /home/user/ å‰ç¼€ï¼Œä¹Ÿå¯ä»¥æ‰©å±•ä¸ºæ”¯æŒæ­£åˆ™æå–ã€‚

éœ€è¦æˆ‘å¸®ä½ åŠ ï¼š
	â€¢	logging æ—¥å¿—è¾“å‡ºï¼Ÿ
	â€¢	æ”¯æŒå¤šè¯­è¨€æ¨¡æ¿ï¼Ÿ
	â€¢	å¤šä¸ª path ç”Ÿæˆå¤šä¸ªæ–‡ä»¶ï¼Ÿ

ä½ å¯ä»¥éšæ—¶è¯´ï¼
