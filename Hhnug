å½“ç„¶å¯ä»¥ âœ…
ä½ è¿™ä¸ª Ansible ä»»åŠ¡æ˜¯å¾€ GraphQL æ’å…¥ä¸€ä¸ª tenant è®°å½•ã€‚
æˆ‘ä»¬æŠŠå®ƒè½¬æˆç­‰ä»·çš„ curl å‘½ä»¤ï¼ˆå•æ¡å³å¯æ‰§è¡Œï¼‰ï¼Œå¦‚ä¸‹ï¼š

âœ… å¯¹åº”çš„ curl å‘½ä»¤

curl -X POST "http://localhost:4300/graphql" \
  -H "Content-Type: application/json" \
  -d '{"query": "mutation { insert_tenant(objects: {name: \"default\", slug: \"default\"}) { returning { id } } }"}'

ğŸ§© å‘½ä»¤è¯´æ˜

å‚æ•°	å«ä¹‰
-X POST	GraphQL çš„è¯·æ±‚æ–¹æ³•å›ºå®šä¸º POST
http://localhost:4300/graphql	GraphQL endpointï¼ˆä¸ä½ çš„ Ansible é…ç½®ä¸€è‡´ï¼‰
-H "Content-Type: application/json"	å‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚ä½“æ˜¯ JSON æ ¼å¼
-d '{...}'	GraphQL mutation è¯·æ±‚ä½“ï¼Œæ³¨æ„å†…å±‚å¼•å·å·²æ­£ç¡®è½¬ä¹‰

ğŸ§  è¿”å›ç»“æœç¤ºä¾‹

æ‰§è¡Œåå¦‚æœæˆåŠŸï¼Œä¼šè¿”å›ç±»ä¼¼ï¼š

{
  "data": {
    "insert_tenant": {
      "returning": [
        {
          "id": "uuid-xxxxxx"
        }
      ]
    }
  }
}

âš ï¸ æ³¨æ„å®‰å…¨
	â€¢	è¿™æ˜¯ æœ‰å†™æ“ä½œçš„å‘½ä»¤ï¼ˆmutationï¼‰ï¼Œä¼šçœŸçš„å¾€æ•°æ®åº“æ’å…¥è®°å½•ï¼›
	â€¢	å»ºè®®ä½  å…ˆç¡®è®¤æœåŠ¡å¯ç”¨ï¼ˆä¾‹å¦‚ curl http://localhost:4300/graphql è¿”å› 200ï¼‰ï¼Œ
	â€¢	ç„¶åå†æ‰§è¡Œæ­¤å‘½ä»¤ï¼›
	â€¢	å¦‚æœæƒ³æµ‹è¯• GraphQL æ˜¯å¦æ­£å¸¸ä½†ä¸æ’å…¥æ•°æ®ï¼Œå¯ä»¥æ”¹ç”¨ queryï¼Œä¾‹å¦‚ï¼š

curl -X POST "http://localhost:4300/graphql" \
  -H "Content-Type: application/json" \
  -d '{"query": "{ __typename }"}'

æ˜¯å¦å¸Œæœ›æˆ‘å†å¸®ä½ è¡¥ä¸€ä¸ªå¸¦å˜é‡å‚æ•°ç‰ˆæœ¬ï¼ˆå¯ä»¥è‡ªå®šä¹‰ name/slugï¼Œæ¯”å¦‚ ${TENANT_NAME}ï¼‰ï¼Ÿ
