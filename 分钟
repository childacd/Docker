å¥½çš„ï¼Œæˆ‘ä»¬æ¥æ‰©å±•è¿™ä¸ªåŠŸèƒ½ï¼Œæ–°å¢ä¸€ä¸ª è·å–å½“å‰åˆ†é’Ÿï¼ˆ0~59ï¼‰ çš„å ä½ç¬¦ï¼š

âœ… ä½ è¦çš„æ–°åŠŸèƒ½

åœ¨åŸæœ‰ {CobDate} / {PreCobDate} æ›¿æ¢çš„åŸºç¡€ä¸Šï¼Œæ–°å¢æ”¯æŒï¼š
	â€¢	{CurrentMinute}ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼šä¼šè¢«æ›¿æ¢ä¸ºå½“å‰åˆ†é’Ÿæ•°ï¼Œæ ¼å¼æ˜¯ 00~59ï¼Œå§‹ç»ˆæ˜¯ä¸¤ä½æ•°å­—ã€‚

ä¾‹å¦‚ï¼š

s = "Time marker: {CurrentMinute}"
â†’ "Time marker: 07"  # å¦‚æœå½“å‰æ˜¯ 08:07

âœ… æ–°å¢å‡½æ•°ï¼šget_current_minute()

def get_current_minute() -> str:
    return datetime.now().strftime("%M")

âœ… æ›´æ–°åçš„ replace_placeholders() æ–¹æ³•

def replace_placeholders(s: str) -> str:
    def replacer(match):
        key = match.group(1).lower()
        if key == "cobdate":
            return get_cob_date()
        elif key == "precobdate":
            return get_previous_cob_date()
        elif key == "currentminute":
            return get_current_minute()
        else:
            return match.group(0)  # keep unchanged

    return re.sub(r"\{(.*?)\}", replacer, s, flags=re.IGNORECASE)

âœ… æ–°å¢æµ‹è¯•ç”¨ä¾‹ï¼šæµ‹è¯• {CurrentMinute} å ä½ç¬¦

åœ¨ TestCobDateFunctions é‡Œæ·»åŠ ä¸€æ¡æµ‹è¯•ï¼š

def test_replace_placeholder_current_minute(self):
    s = "The minute is {CurrentMinute}."
    result = replace_placeholders(s)
    self.assertRegex(result, r"The minute is \d{2}\.")

âœ… å®Œæ•´æµ‹è¯•åçš„æ›¿æ¢ä¾‹å­ï¼š

s = "Cob: {CobDate}, Pre: {PreCobDate}, Min: {CurrentMinute}"
print(replace_placeholders(s))

å‡è®¾ä»Šå¤©æ˜¯å‘¨å…­ 2025-07-05 ä¸”å½“å‰æ—¶é—´ä¸º 08:07ï¼Œè¾“å‡ºå°†ç±»ä¼¼ï¼š

Cob: 2025-07-04, Pre: 2025-07-03, Min: 07

å¦‚æœä½ å°†æ¥è¿˜æƒ³æ”¯æŒï¼š
	â€¢	è‡ªå®šä¹‰æ ¼å¼ï¼ˆæ¯”å¦‚ {CobDate:%Y%m%d}ï¼‰ï¼›
	â€¢	æ‰©å±•æ›´å¤šæ—¶é—´å­—æ®µï¼ˆæ¯”å¦‚ {Hour}ã€{Second}ï¼‰ï¼›

ä¹Ÿå¯ä»¥åŸºäºè¿™ä¸ªæ¶æ„è½»æ¾åŠ è¿›å»ã€‚æˆ‘å¯ä»¥å¸®ä½ åšæˆä¸€ä¸ªæ›´é€šç”¨çš„å ä½ç¬¦è§£æå™¨ã€‚å¦‚æœä½ æ„Ÿå…´è¶£æˆ‘ä»¬å¯ä»¥ç»§ç»­æ‰©å±• ğŸ‘
