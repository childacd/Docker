å¤ªæ£’äº†ï¼ä½ å·²ç»å†™å¥½äº† Python è„šæœ¬ï¼Œæ¥ä¸‹æ¥ä½ åªéœ€è¦ç”¨ curlã€Postmanï¼Œæˆ–è€…è‡ªå·±å†™ä¸ª Python è¯·æ±‚å°±å¯ä»¥å‘ API è¯·æ±‚äº†ã€‚

æˆ‘ç»™ä½ ä¸€ä¸ªæœ€ç®€å•ç›´æ¥çš„ è¯·æ±‚ç¤ºä¾‹ï¼Œä½ å¯ä»¥é©¬ä¸Šç”¨ã€‚

âœ… 1. å¯åŠ¨ä½ çš„ API

å‡è®¾ä½ çš„æ–‡ä»¶åæ˜¯ main.pyï¼Œå¯åŠ¨å‘½ä»¤ï¼š

uvicorn main:app --reload --host 0.0.0.0 --port 8000

è¿™ä¸ªæ—¶å€™ä½ çš„ API åœ°å€æ˜¯ï¼š

http://<your-server-ip>:8000

å¦‚æœä½ æ˜¯åœ¨æœ¬æœºæµ‹è¯•ï¼š

http://127.0.0.1:8000

âœ… 2. Sample Request (ç”¨ curl)

Example: Copy file from S3 to MinIO

curl -X POST "http://127.0.0.1:8000/copy" \
-H "Content-Type: application/json" \
-d '{
  "source_type": "s3",
  "source_bucket": "your-s3-bucket",
  "source_object": "path/in/s3/file.txt",
  "destination_type": "minio",
  "destination_bucket": "your-minio-bucket",
  "destination_object": "path/in/minio/file.txt"
}'

Example: Copy file from MinIO to S3

curl -X POST "http://127.0.0.1:8000/copy" \
-H "Content-Type: application/json" \
-d '{
  "source_type": "minio",
  "source_bucket": "your-minio-bucket",
  "source_object": "path/in/minio/file.txt",
  "destination_type": "s3",
  "destination_bucket": "your-s3-bucket",
  "destination_object": "path/in/s3/file.txt"
}'

âœ… 3. æˆåŠŸå“åº”æ ¼å¼

å¦‚æœæˆåŠŸï¼š

{
  "message": "File copied successfully."
}

å¦‚æœå¤±è´¥ï¼š

{
  "detail": "Error Message..."
}

âœ… 4. å¯é€‰ï¼šç”¨ Python å‘è¯·æ±‚ï¼ˆæ›´ä¼˜é›…ï¼‰

ä½ ä¹Ÿå¯ä»¥å†™ä¸ª Python è„šæœ¬å‘è¯·æ±‚ï¼š

import requests

url = "http://127.0.0.1:8000/copy"

data = {
    "source_type": "s3",
    "source_bucket": "your-s3-bucket",
    "source_object": "path/in/s3/file.txt",
    "destination_type": "minio",
    "destination_bucket": "your-minio-bucket",
    "destination_object": "path/in/minio/file.txt"
}

response = requests.post(url, json=data)

print(response.json())

å¦‚æœä½ éœ€è¦æˆ‘å¸®ä½ ï¼š
	â€¢	å¢åŠ æ‰¹é‡ copy
	â€¢	æ”¯æŒä¸Šä¼ æ–‡ä»¶
	â€¢	æ”¯æŒå¼‚æ­¥

å¯ä»¥éšæ—¶å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¸®ä½ æ‰©å±•ï¼ğŸ”¥
