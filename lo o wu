å¯ä»¥ï¼Œä¸€è¡Œå‘½ä»¤é‡ŒæŠŠ Instance Name (tag:Name) ä¹Ÿä¸€èµ·æ‰“å°å‡ºæ¥ã€‚

ä¸‹é¢æ˜¯ä¸€è¡Œå‘½ä»¤ï¼ŒåŒ…å«ï¼š
	â€¢	Instance ID
	â€¢	Instance Name
	â€¢	AMI ID
	â€¢	AMI Name
	â€¢	æ—¥æœŸåç¼€ï¼ˆYYYY-MM-DDï¼‰å¹¶æŒ‰æ—¥æœŸæ’åº

âœ… ä¸€è¡Œå‘½ä»¤ï¼ˆå« Instance Nameï¼‰

æŠŠ YourTagKeyã€YourTagValueã€ap-southeast-1 æ”¹æˆä½ çš„ï¼š

aws ec2 describe-instances --region ap-southeast-1 --filters "Name=tag:YourTagKey,Values=YourTagValue" --query 'Reservations[].Instances[].[InstanceId,ImageId,Tags]' --output text \
| while read iid ami rest; do \
    iname=$(echo "$rest" | sed -n 's/.*Name\s\+\([^ ]*\).*/\1/p'); \
    aname=$(aws ec2 describe-images --image-ids "$ami" --region ap-southeast-1 --query "Images[0].Name" --output text); \
    date=$(echo "$aname" | grep -oE "[0-9]{4}-[0-9]{2}-[0-9]{2}$"); \
    echo -e "${date}\t${iid}\t${iname}\t${ami}\t${aname}"; \
  done \
| sort -k1,1

ğŸ“Œ è¾“å‡ºç¤ºä¾‹ï¼š

2025-01-10  i-0123456789  web-prod-01   ami-0aaabbbb   myapp-prod-2025-01-10
2025-05-03  i-0abcd12345  api-prod-02   ami-0cccdddd   myapp-prod-2025-05-03
2025-09-12  i-0ffff22222  batch-prod-01 ami-0ffffaaa   myapp-prod-2025-09-12

ğŸ“ è§£é‡Šï¼ˆä¿è¯ä½ èƒ½æ”¹ï¼‰

å¦‚ä½•ä» Tags æå– Nameï¼Ÿ

AWS CLI è¾“å‡º text æ—¶ï¼ŒTags ä¼šå˜æˆä¸€ä¸²ï¼š

Key  Name  Value  web-prod-01  Key  Env  Value  Prod

æˆ‘ä»¬ç”¨ sed æŠ“ï¼š

sed -n 's/.*Name\s\+\([^ ]*\).*/\1/p'

æŠ“åˆ° web-prod-01ã€‚

âš ï¸ å¦‚æœ Instance Name æœ‰ç©ºæ ¼ï¼Ÿ

ä¾‹å¦‚ "Production Web Server A1"
é‚£ä½ å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¯ä»¥æ”¹æˆæ›´å¼ºçš„ JSON è§£ææ–¹æ¡ˆã€‚

âœ… éœ€è¦æˆ‘å¸®ä½ æ”¹æˆ â€œä¸ç”¨ whileï¼Œç”¨çº¯ pipe+xargs çš„è¶…ç¡¬æ ¸ä¸€è¡Œç‰ˆâ€ å—ï¼Ÿ

å¯ä»¥ï¼Œä½†å¯è¯»æ€§ä¼šæ›´ç³Ÿ ğŸ˜‚

å¦‚æœä½ æƒ³è¦ï¼Œæˆ‘å¯ä»¥ç»™ä½ å†™ä¸€ä¸ªæé™å‹ç¼©çš„ç‰ˆæœ¬ã€‚
